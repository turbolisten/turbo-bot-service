# 🤖 Bot 开发指南

## ⚠️ 免责声明
**本项目为技术研究性质，严禁用于以下用途：**
- 违反《微信软件许可及服务协议》的任何行为
- 网络诈骗、垃圾信息传播等非法活动
- 大规模自动化营销或用户隐私数据采集
---

## 适用产品示例
- AI智能客服
- 微信群管理-群内关键字触发、入群管理等 
- 企业内部批量化管理系统 
- 教育机构课程答疑、学习提醒
- 告警类机器人-地震告警、极端天气、服务器宕机、违规内容等 
- 问答类机器人-AI咨询、百科、内容查询类 
- 电商发单返利、私域营销平台
- 自定义业务类机器人-结合场景自定义开发 
- 等等
---

## Bot 服务架构

|组件|部署方式|核心功能|通信协议|
|----|----------------------------|-------|--------|
|WxBotServer| SaaS/私有化(windows/linux/mac) |微信协议实现、事件推送、消息发送等|WebSocket|
|tubo-bot| 本地/云托管                     |业务逻辑处理、AI集成、定时任务管理等|HTTP|

![服务架构](https://upload.cc/i1/2025/05/12/HwaEl3.png "服务架构")

# 当前项目为客户端，以下文档均为客户端使用说明

当前开源代码包含的功能，仅仅是Bot功能的冰山一角，
欢迎更多的小伙伴，奇思妙想，大开脑洞，让Bot进化成为更有趣、更有价值的形态！

> 📧 开发维护不易，服务端请联系：turbohub@163.com 获取部署对接文档，感谢您的支持！❤️


## 基础环境

|组件|需要|可替换|
|----|-------|-------|
|Java Runtime|JDK 21+|JDK17+|
|Spring Boot|3.4.2+|-|
|数据库|PostgreSQL 15|MySQL 8.0+|
|缓存|Redis 5.0+|-|

> 当前项目使用云服务AI识别消息，默认使用【阿里云百炼应用】，
可按需自行移除或替换其他AI服务（如：百度、硅基流动、豆包等）

> 🚀 <font color="#FF0000">如果想【快速体验】，忽略环境搭建。可以切换使用分支 [slim](https://github.com/turbolisten/turbo-bot-service/tree/slim)</font><br/>
只需配置`base.properties`中WxBot相关参数， 然后启动 `WXApplication`<br/>
即可接收wx消息，并打印到控制台，可自行编写业务处理逻辑。

## 项目说明

|模块|功能说明|
|-----|-----|
|turbo-bot-base|项目基础模块，包含工具类、公共配置、基础服务等供其他模块使用|
|turbo-bot-wx-service|Wx服务模块，可独立运行。使用WebSocket连接服务端，接收服务端推送事件，一顿处理后，调用服务端API进行回复|
|turbo-bot-app-service|应用模块，可独立运行。主要围绕Bot开发的一些功能，例如：定时推送新闻资讯、预约提醒、Webhook 等功能。|

## 初始化步骤

**1、数据库准备**
```sql
-- 执行初始化脚本
turbo-bot-base/resources/sql/init.sql

-- 配置微信机器人ID
UPDATE t_wx_bot SET wx_id = 'your_wxid';
```

**2、配置文件调整**

>  当前项目配置文件分为 dev、prod 两个配置。默认dev环境，按需自行配置和切换。
需要自行修改配置文件 resources/base.properties 中的数据库、redis、服务端连接。
其他的一些邮件、AI服务key等，为了方便就直接写在了代码常量中，
全局搜索：【TODO 配置】，就能看到配置项，按需自行修改。

**3、 编译打包**

```bash
# 开发环境打包
mvn clean package -Dmaven.test.skip=true -Pdev

# 生产环境打包
mvn clean package -Dmaven.test.skip=true -Pprod
```

**4、启动类**
- turbo-bot-wx-service => WxApplication
- turbo-bot-app-service => AppApplication

## ⚠️ 风险提示
因采用非官方协议实现，存在以下风险
- 账号封禁风险：wx官方可能通过行为特征、协议特征、IP异常等机制识别，导致账号封禁
- 服务稳定风险：wx协议变更可能导致功能中断、失效，不承诺长期维护（稳定性仍然超过99%的Bot）

## 操作建议
- 使用非主账号进行测试
- 控制消息频率：单账号消息频率最多每2秒1条，尽量符合真人消息频率
- 行为模式优化：添加消息发送随机延迟，避免敏感关键词交互、避免频繁发送链接
- 避免固定频率的操作（如定时任务,可以添加随机延迟时间波动）
